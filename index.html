<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>cxDialog 对话框 &raquo; 在线演示 - 前端开发仓库</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">
<link rel="stylesheet" href="css/jquery.cxdialog.css">
<style>
body{background:#eee;font:14px/1.7 tahoma,'\5fae\8f6f\96c5\9ed1',sans-serif;}
h1,h2,h3{font-size:36px;line-height:1;}
h2{font-size:24px;}
h3{font-size:18px;}
fieldset{margin:2em 0;border-color:#ccc;}
fieldset legend{color:#888;font-size:1rem;line-height:2;}

.wrap{max-width:800px;margin:0 auto;padding:20px 40px;border-radius:5px;background-color:#fff;box-shadow:0 0 8px rgba(0,0,0,0.2);}

#prompt_box{display:none;margin:10px;padding:10px;border:2px solid #ccc;}
#prompt_box label{display:block;margin-bottom:5px;}
</style>
</head>
<body>
<div class="wrap">
  <h1>cxDialog 对话框</h1>

  <h2>示例</h2>
  <form id="example" action="javascript://" method="get">
    <fieldset>
      <legend>按钮</legend>
      <label><input type="checkbox" name="btn" value="ok"> 确认</label>
      <label><input type="checkbox" name="btn" value="no"> 取消</label>
      <label><input type="checkbox" name="buttons" value="自定义1"> 自定义1</label>
      <label><input type="checkbox" name="buttons" value="自定义2"> 自定义2</label>
      <label><input type="checkbox" name="buttons" value="自定义3"> 自定义3</label>
    </fieldset>

    <fieldset>
      <legend>背景遮罩</legend>
      <label><input type="radio" name="mask" value="" checked> 默认</label>
      <label><input type="radio" name="mask" value="not_mask"> 透明</label>
    </fieldset>

    <fieldset>
      <legend>背景遮罩是否可关闭对话框</legend>
      <label><input type="radio" name="maskClose" value="1" checked> 允许</label>
      <label><input type="radio" name="maskClose" value="0"> 禁止</label>
    </fieldset>

    <fieldset>
      <legend>主题样式</legend>
      <label><input type="radio" name="theme" value="" checked> 默认</label>
      <label><input type="radio" name="theme" value="ios"> iOS</label>
    </fieldset>

    <fieldset>
      <legend>显示对话框</legend>
      <button type="button" name="alert">模拟 alert</button>
      <button type="button" name="confirm">模拟 confirm</button>
      <button type="button" name="prompt">模拟 prompt</button>
      <p id="result_confirm"></p>
      <p id="result_prompt"></p>
    </fieldset>
  </form>

  <div id="prompt_box">
    <label for="prompt_name">您正在使用的什么浏览器？</label>
    <input id="prompt_name" type="text">
  </div>

  <a href="http://code.ciaoca.com/jquery/cxdialog/demo/">查看更多示例</a>

  <h2>文档</h2>
  <p><a target="_blank" href="https://github.com/ciaoca/cxDialog">Github</a></p>
  
  <h2>作者</h2>
  <p><a target="_blank" href="http://ciaoca.com/">Ciaoca</a></p>

  <h2>协议</h2>
  <p>Released under the MIT license</p>
</div>

<!-- <script src="http://cdn.staticfile.org/jquery/1.9.0/jquery.min.js"></script> -->
<script src="http://cdn.staticfile.org/zepto/1.1.1/zepto.min.js"></script>
<script src="js/jquery.cxdialog.js"></script>
<script>
(function() {
  var form = $('#example');
  var promptName = document.getElementById('prompt_name');

  var setOptions = function() {
    var data = form.serializeArray();
    var opts = {
      ok: null, 
      no: null,
      maskClose: true,
      buttons: [],
      baseClass: [],
    }

    for (var i = 0, l = data.length; i < l; i++) {
      if ((data[i].name === 'mask' || data[i].name === 'theme') && data[i].value) {
        opts.baseClass.push(data[i].value);

      } else if (data[i].name === 'maskClose') {
        if (data[i].value === '0') {
          opts.maskClose = false;
        };

      } else if (data[i].name === 'btn' && ['ok','no'].indexOf(data[i].value) >= 0) {
        opts[data[i].value] = function() {};

      } else if (data[i].name === 'buttons') {
        opts.buttons.push({
          text: data[i].value,
          callback: function() {}
        });
      };
    };

    opts.baseClass = opts.baseClass.join(' ');

    $.extend($.cxDialog.defaults, opts);
  };

  form.on('click', 'button', function() {
    var _this = this;
    var _name = _this.name;

    setOptions();

    if (_name === 'alert') {
      $.cxDialog('Hello World<br>I am cxDialog');

    } else if (_name === 'confirm') {
      $.cxDialog({
        title: 'cxDialog',
        info: '现在开始使用 <strong>cxDialog</strong>',
        ok: function() {
          document.getElementById('result_confirm').innerHTML = '你选择了：<strong>确定</strong>';
        },
        no: function() {
          document.getElementById('result_confirm').innerHTML = '你选择了：<strong>取消</strong>';
        }
      });

    } else if (_name === 'prompt') {
      $.cxDialog({
        title: 'cxDialog',
        info: document.getElementById('prompt_box'),
        ok: function() {
          if (promptName.value.length) {
            document.getElementById('result_prompt').innerHTML = '你填写的是：' + promptName.value;
            promptName.value = '';
          };
        },
        no: function() {}
      });
    };
  });
})();
</script>
</body>
</html>
